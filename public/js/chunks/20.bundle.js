(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"0xxW":function(e,t,a){"use strict";a.r(t),a("oVuX"),a("qePV"),a("B6y2"),a("rNhl");var n=a("o0o1"),s=a.n(n),r=a("rePB"),i=(a("ls82"),a("HaE+")),o=a("hMhp"),l=a("FjSL"),c=a("2A9W"),u=a("PdH4"),p=a.n(u),d=(a("QVta"),{name:"BalancePanel",mixins:[o.a],components:{AppTable:l.a,AmountInput:c.a},props:{userBalanceState:{type:String,required:!0},userDepositBalanceState:{type:String,required:!0},canUserWithdrawDeposit:{type:Boolean,required:!0},maxDepositWithdrawAmount:{type:Number,required:!0}},data:function(){return{tableQueryURL:"/balance/get-transactions",loading:!1,amount:null,balanceTypes:{from:"",to:""},newUserBalanceState:null,newUserDepositBalanceState:null,newCanUserWithdrawDeposit:!0}},computed:{actualUserBalanceState:function(){return this.newUserBalanceState||this.userBalanceState},actualUserDepositBalanceState:function(){return this.newUserDepositBalanceState||this.userDepositBalanceState},userBalanceAmount:function(){return parseFloat(this.actualUserBalanceState)},userDepositBalanceAmount:function(){return parseFloat(this.actualUserDepositBalanceState)},maxValue:function(){return this.balanceTypes.to?this.isTransferFromDepositBalance?this.maxDepositWithdrawAmount:this.userBalanceAmount:0},balanceTypeToOptions:function(){return[this.isTransferFromDepositBalance?{text:this.$t("to-settlement-balance"),value:"balance_token"}:{text:this.$t("to-deposit-balance"),value:"balance_token_deposit"}]},isTransferFromDepositBalanceBlocked:function(){return!this.canUserWithdrawDeposit||!this.newCanUserWithdrawDeposit},isTransferFromDepositBalance:function(){return"balance_token_deposit"===this.balanceTypes.from}},watch:{"balanceTypes.from":function(){this.balanceTypes.to="",this.amount=null}},methods:{transfer:function(){var e=this;return Object(i.a)(s.a.mark((function t(){var a,n,i,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loading&&e.amount&&e.balanceTypes.to){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,p.a.fire({title:e.$t("transfer"),text:e.$t("transfer-transaction-creating"),timer:0,timerProgressBar:!0,onBeforeOpen:function(){return p.a.showLoading()}}),t.prev=4,t.next=7,axios.post("/balance/transfer-between-balances",Object(r.a)({amount:String(e.amount)},"balance_type",e.balanceTypes.to));case 7:return a=t.sent,n=a.data,e.balanceTypes.from=e.balanceTypes.to="",e.amount=null,e.newUserBalanceState=n.user_balance_state,e.newUserDepositBalanceState=n.user_deposit_balance_state,e.newCanUserWithdrawDeposit=n.can_user_withdraw_deposit,p.a.fire(e.$t("transfer"),e.$t("transfer-completed-successfully"),"success"),t.next=17,e.getTableData();case 17:t.next=24;break;case 19:t.prev=19,t.t0=t.catch(4),i=t.t0.response,o="string"==typeof i.data?i.data:Object.values(i.data.errors).join("<br>"),p.a.fire(e.$t("error"),o,"error");case 24:e.loading=!1;case 25:case"end":return t.stop()}}),t,null,[[4,19]])})))()}}}),m=a("KHd+"),f=Object(m.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-12 col-sm-10 col-md-8 col-lg-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h4",{directives:[{name:"t",rawName:"v-t",value:"exchange",expression:"'exchange'"}],staticClass:"card-title"}),e._v(" "),a("p",{directives:[{name:"t",rawName:"v-t",value:"transfer-between-balances",expression:"'transfer-between-balances'"}],staticClass:"card-text"}),e._v(" "),a("app-transition",{attrs:{name:"collapse"}},[e.isTransferFromDepositBalanceBlocked?a("div",{directives:[{name:"t",rawName:"v-t",value:"hints.deposit-withdrawal-limit",expression:"'hints.deposit-withdrawal-limit'"}],staticClass:"alert alert-primary",attrs:{role:"alert"}}):e._e()]),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-start","margin-bottom":"15px",color:"#525252"}},[a("div",{staticStyle:{"text-align":"left"}},[a("div",[e._v("\n                                "+e._s(e.$t("settlement-balance"))+": "),a("strong",{domProps:{textContent:e._s(e.actualUserBalanceState)}})]),e._v(" "),a("div",[e._v("\n                                "+e._s(e.$t("deposit-balance"))+":\n                                "),a("strong",{domProps:{textContent:e._s(e.actualUserDepositBalanceState)}})])])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"flex-direction":"column"}},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.balanceTypes.from,expression:"balanceTypes.from"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.balanceTypes,"from",t.target.multiple?a:a[0])}}},[a("option",{directives:[{name:"t",rawName:"v-t",value:"select-balance-type",expression:"'select-balance-type'"}],attrs:{value:"",selected:""}}),e._v(" "),e.isTransferFromDepositBalanceBlocked?e._e():a("option",{directives:[{name:"t",rawName:"v-t",value:"from-deposit-balance",expression:"'from-deposit-balance'"}],attrs:{value:"balance_token_deposit"}}),e._v(" "),a("option",{directives:[{name:"t",rawName:"v-t",value:"from-settlement-balance",expression:"'from-settlement-balance'"}],attrs:{value:"balance_token"}})]),e._v(" "),a("app-transition",{attrs:{name:"collapse"}},[e.isTransferFromDepositBalance?a("div",{directives:[{name:"t",rawName:"v-t",value:"hints.deposit-withdrawal-restriction",expression:"'hints.deposit-withdrawal-restriction'"}],staticStyle:{"margin-left":"2px","font-size":"12px"}}):e._e()])],1)]),e._v(" "),e.balanceTypes.from?a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.balanceTypes.to,expression:"balanceTypes.to"}],staticClass:"custom-select",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.balanceTypes,"to",t.target.multiple?a:a[0])},function(t){e.amount=null}]}},[a("option",{directives:[{name:"t",rawName:"v-t",value:"select-balance-type",expression:"'select-balance-type'"}],attrs:{value:"",selected:""}}),e._v(" "),e._l(e.balanceTypeToOptions,(function(t){var n=t.text,s=t.value;return a("option",{key:s,domProps:{value:s,textContent:e._s(n)}})}))],2)])]):e._e(),e._v(" "),e.balanceTypes.to?a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("amount-input",{attrs:{max:e.maxValue,suffix:"RTL",placeholder:e.$t("transfer-amount")},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}}),e._v(" "),a("app-transition",{attrs:{name:"collapse",appear:""}},[e.isTransferFromDepositBalance?a("div",{staticStyle:{"margin-left":"2px","font-size":"12px"}},[e._v("\n                                        "+e._s(e.$t("hints.deposit-withdrawal-available-amount"))+" -\n                                        "),a("strong",{domProps:{textContent:e._s(e.maxDepositWithdrawAmount)}}),e._v(" "),a("strong",[e._v("RTL")])]):e._e()])],1)]):e._e(),e._v(" "),e.amount?a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("button",{directives:[{name:"t",rawName:"v-t",value:"to-transfer",expression:"'to-transfer'"}],staticClass:"btn btn-primary",staticStyle:{"max-width":"45%"},attrs:{type:"button"},on:{click:function(t){return e.transfer()}}})])]):e._e()])],1)])])]),e._v(" "),e.isTableFilled?a("app-table",e._b({attrs:{title:e.$t("transactions")},on:{"load-page":e.getTableData}},"app-table",e.tableData,!1)):e._e()],1)}),[],!1,null,null,null);t.default=f.exports},"2A9W":function(e,t,a){"use strict";a("qePV"),a("SYor");var n={name:"AmountInput",components:{CurrencyInput:a("1BPP").a},props:{value:{required:!0},min:{type:Number,default:0},max:{type:Number,default:999999999999999},precision:{type:Number,default:8},placeholder:{type:String,default:""},required:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},suffix:{type:String,default:null}},data:function(){return{focused:!1}},computed:{currency:function(){return this.suffix?{suffix:" "+this.suffix.trim()}:null}},methods:{inputHandler:function(e){this.focused&&this.$emit("input",e)}}},s=a("KHd+"),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("currency-input",{staticClass:"form-control",attrs:{value:e.value,placeholder:e.placeholder,required:e.required,disabled:e.disabled,precision:e.precision,"value-range":{min:e.min,max:e.max},"allow-negative":!1,currency:e.currency},on:{focusin:function(t){e.focused=!0},focusout:function(t){e.focused=!1},input:e.inputHandler}})}),[],!1,null,null,null);t.a=r.exports}}]);