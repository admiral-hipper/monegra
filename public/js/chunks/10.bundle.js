(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"/oEe":function(t,e,n){"use strict";var a=n("52y6");n.n(a).a},"2A9W":function(t,e,n){"use strict";n("qePV"),n("SYor");var a={name:"AmountInput",components:{CurrencyInput:n("1BPP").a},props:{value:{required:!0},min:{type:Number,default:0},max:{type:Number,default:999999999999999},precision:{type:Number,default:8},placeholder:{type:String,default:""},required:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},suffix:{type:String,default:null}},data:function(){return{focused:!1}},computed:{currency:function(){return this.suffix?{suffix:" "+this.suffix.trim()}:null}},methods:{inputHandler:function(t){this.focused&&this.$emit("input",t)}}},r=n("KHd+"),o=Object(r.a)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("currency-input",{staticClass:"form-control",attrs:{value:t.value,placeholder:t.placeholder,required:t.required,disabled:t.disabled,precision:t.precision,"value-range":{min:t.min,max:t.max},"allow-negative":!1,currency:t.currency},on:{focusin:function(e){t.focused=!0},focusout:function(e){t.focused=!1},input:t.inputHandler}})}),[],!1,null,null,null);e.a=o.exports},"52y6":function(t,e,n){var a=n("sKgF");"string"==typeof a&&(a=[[t.i,a,""]]);n("aET+")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(t.exports=a.locals)},"9GSx":function(t,e,n){"use strict";n.r(e),n("ma9I"),n("oVuX"),n("sMBO"),n("B6y2");var a=n("o0o1"),r=n.n(a),o=(n("ls82"),n("HaE+")),s=n("hMhp"),i=n("FjSL"),l=n("2A9W"),c=n("PdH4"),u=n.n(c),d=(n("QVta"),{name:"WithdrawPanel",mixins:[s.a],components:{AppTable:i.a,AmountInput:l.a},props:{userWallets:{type:Array,required:!0},userBalanceState:{type:String,required:!0},quotes:{type:Object,required:!0},linkToWallets:{type:String,required:!0},ratesell:{type:String,required:!0},ratesellusd:{type:String,required:!0}},data:function(){return{tableQueryURL:"/withdraw/get-transactions",loading:!1,amount:null,amountInToken:null,newUserBalanceState:null,selectedUserWallet:{}}},computed:{locationOrigin:function(){return location.origin},cardText:function(){return this.userWallets.length?this.$t("choosing-payment-system"):"".concat(this.$t("messages.first-create"),' <a href="').concat(this.linkToWallets,'">').concat(this.$t("wallet").toLowerCase(),"</a>")},selectedCurrencyCode:function(){return this.selectedUserWallet.type?this.selectedUserWallet.type.currency.code:null},selectedCurrencyQuote:function(){return this.selectedCurrencyCode&&this.quotes[this.selectedCurrencyCode+"/RTL"]||1}},watch:{selectedUserWallet:function(){this.amount&&this.amountInputHandler("amount")}},methods:{amountInputHandler:function(t){"amount"===t?this.amountInToken=this.amount*this.selectedCurrencyQuote:this.amount=this.amountInToken/this.selectedCurrencyQuote},selectWallet:function(t){this.loading||(this.selectedUserWallet=t)},getInfoForTransaction:function(){var t=this;return Object(o.a)(r.a.mark((function e(){var n,a,s,i,l,c,d,p,m,f,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading&&t.selectedUserWallet.id&&t.amount){e.next=2;break}return e.abrupt("return");case 2:return t.loading=!0,n=JSON.parse(JSON.stringify(t.selectedUserWallet)),a=t.amount,u.a.fire({title:t.$t("loading"),text:t.$t("receiving-data"),timer:0,timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,onBeforeOpen:function(){return u.a.showLoading()}}),e.prev=5,e.next=8,axios.get("/withdraw/get-info-for-transaction",{params:{wallet_id:n.id,amount:a}});case 8:i=e.sent,s=i.data,e.next=19;break;case 12:return e.prev=12,e.t0=e.catch(5),l=e.t0.response,c="string"==typeof l.data?l.data:Object.values(l.data.errors).join("<br>"),u.a.fire(t.$t("error"),c,"error"),t.loading=!1,e.abrupt("return");case 19:t.loading=!1,d=n.type.name,p=s.currency_rate?"<div>".concat(t.$t("currency-rate"),": <strong>").concat(s.currency_rate,"</strong></div>"):"",m="<div>".concat(p,"\n                <div>").concat(t.$t("your-wallet-balance"),": <strong>").concat(s.user_balance_state,"</strong></div>\n                <div>").concat(t.$t("withdrawal-amount"),": <strong>").concat(s.amount_to_hold,"</strong></div>\n                <div>").concat(t.$t("your-wallet-number-for-withdrawal",{wallet:d}),": <strong>").concat(s.user_wallet.number,"</strong></div>\n                </div>"),f='<div style="display: flex; flex-direction: column;">\n                        <small>'.concat(t.$t("messages.confirmation-code-sent"),'</small>\n                        <button type="button" class="btn btn-link p-0 m-0 align-baseline" onclick="resendVerificationCode()">').concat(t.$t("send-new-code"),"</button>\n                    </div>"),v=function(e){var n,i=[{grow:"row",html:m,footer:t.$t("hints.withdrawal-hold"),confirmButtonText:t.$t("withdraw-amount"),showCancelButton:!0},{text:t.$t("confirmation-code-generating"),timer:0,timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,onBeforeOpen:t.sendVerificationCode},{grow:"column",text:e?t.$t("enter-confirmation-code"):t.$t("messages.confirmation-code-sent"),confirmButtonText:t.$t("confirm"),footer:f,input:"text",showCancelButton:!1,inputPlaceholder:t.$t("confirmation-code"),inputValidator:function(e){return e?5!==e.length?t.$t("code-must-be-5-digits"):void 0:t.$t("enter-confirmation-code")},preConfirm:(n=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.a.showLoading(),e.next=3,t.createTransaction({amount:a,verificationCode:n,userWallet:s.user_wallet});case 3:case"end":return e.stop()}}),e)}))),function(t){return n.apply(this,arguments)})}];e||i.shift(),u.a.mixin({title:t.$t("rtl-sale"),focusConfirm:!1,showCloseButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,cancelButtonText:t.$t("cancel"),progressSteps:[1,2,3]}).queue(i)},window.resendVerificationCode=function(){v()},v(!0);case 27:case"end":return e.stop()}}),e,null,[[5,12]])})))()},createTransaction:function(t){var e=this;return Object(o.a)(r.a.mark((function n(){var a,o,s,i,l,c,d,p,m,f;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.loading){n.next=2;break}return n.abrupt("return");case 2:return e.loading=!0,a={wallet_id:t.userWallet.id,verification_code:t.verificationCode,amount:t.amount},n.prev=4,n.next=7,axios.post("/withdraw/create-transaction",a);case 7:return o=n.sent,s=o.data,i=s.user_balance_state,l=s.link_to_transactions,c=s.internal_currency_code,d=s.internal_currency_amount,e.newUserBalanceState=i,p="<div>\n                    <div>".concat(e.$t("messages.payment-transaction-created")," <strong>").concat(d," ").concat(c,"</strong></div>\n                    <br>\n                    <small>").concat(e.$t("hints.monitor-transaction-status"),' <a href="').concat(l,'">').concat(e.$t("transactions"),"</a></small>\n                    </div>"),u.a.fire({title:e.$t("transaction-creating"),html:p,icon:"success"}),n.next=14,e.getTableData();case 14:n.next=21;break;case 16:n.prev=16,n.t0=n.catch(4),m=n.t0.response,f="string"==typeof m.data?m.data:Object.values(m.data.errors).join("<br>"),u.a.showValidationMessage(f);case 21:e.selectedUserWallet={},e.amount=e.amountInToken=null,e.loading=!1;case 24:case"end":return n.stop()}}),n,null,[[4,16]])})))()},sendVerificationCode:function(){var t=this;return Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.a.showLoading(),e.prev=1,e.next=4,axios.get("/withdraw/send-verification-code");case 4:u.a.hideLoading(),u.a.clickConfirm(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),u.a.fire({title:t.$t("rtl-sale"),text:t.$t("error-while-generating-code"),icon:"error"});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()}}}),p=(n("/oEe"),n("KHd+")),m=Object(p.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("app-transition",{attrs:{name:"collapse",appear:""}},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h4",{directives:[{name:"t",rawName:"v-t",value:"rtl-sale",expression:"'rtl-sale'"}],staticClass:"card-title"}),t._v(" "),n("p",{staticClass:"card-text",domProps:{innerHTML:t._s(t.cardText)}}),t._v(" "),n("div",{staticStyle:{"margin-bottom":"15px",color:"#525252"}},[t._v("\n                            "+t._s(t.$t("your-settlement-balance"))+":\n                            "),n("strong",{domProps:{textContent:t._s(t.newUserBalanceState||t.userBalanceState)}}),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"hint-block"},[t._v(t._s(t.$t("selling-rate"))+": RTL/XAU "),n("strong",{domProps:{textContent:t._s(t.ratesell)}}),t._v(" RTL/USD "),n("strong",{domProps:{textContent:t._s(t.ratesellusd)}})])]),t._v(" "),t.userWallets.length?n("div",{staticStyle:{display:"flex","flex-direction":"column"}},[n("div",{staticClass:"user-wallets"},t._l(t.userWallets,(function(e){return n("div",{key:e.id,class:{active:t.selectedUserWallet.id===e.id},on:{click:function(n){return t.selectWallet(e)}}},[n("span",{staticStyle:{"margin-right":"5px"},domProps:{textContent:t._s(e.type.name)}}),t._v(" "),n("img",{attrs:{src:t.locationOrigin+"/"+e.type.image_path,alt:e.type.name,height:"40"}})])})),0),t._v(" "),n("app-transition",{attrs:{name:"collapse"}},[t.selectedUserWallet.id?n("div",{staticClass:"form-body mt-4"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.$t("sale-amount-in"))+" "+t._s(t.selectedCurrencyCode))]),t._v(" "),n("amount-input",{attrs:{suffix:t.selectedCurrencyCode,placeholder:t.selectedCurrencyCode},on:{input:function(e){return t.amountInputHandler("amount")}},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)]),t._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"form-group"},[n("label",[t._v(t._s(t.$t("sale-amount-in"))+" RTL")]),t._v(" "),n("amount-input",{attrs:{suffix:"RTL",placeholder:"RTL"},on:{input:function(e){return t.amountInputHandler("amountInToken")}},model:{value:t.amountInToken,callback:function(e){t.amountInToken=e},expression:"amountInToken"}})],1)])])]):t._e()]),t._v(" "),n("app-transition",{attrs:{name:"collapse"}},[t.amount?n("div",[n("button",{directives:[{name:"t",rawName:"v-t",value:"sell-rtl",expression:"'sell-rtl'"}],staticClass:"btn btn-primary",staticStyle:{"max-width":"50%"},attrs:{type:"button"},on:{click:function(e){return t.getInfoForTransaction()}}})]):t._e()])],1):t._e()])])])],1)]),t._v(" "),t.isTableFilled?n("app-table",t._b({attrs:{title:t.$t("transactions")},on:{"load-page":t.getTableData}},"app-table",t.tableData,!1)):t._e()],1)}),[],!1,null,null,null);e.default=m.exports},sKgF:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".user-wallets{display:flex;align-items:center;flex-wrap:wrap}.user-wallets>div{white-space:nowrap;margin:5px 10px 5px 0;padding:10px 15px;border:3px solid transparent;color:#424242;border-radius:10px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.04),0 1px 5px 0 rgba(0,0,0,.1);transition:border-color .2s ease-in-out,box-shadow .2s ease-in-out;will-change:border-color,box-shadow;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.user-wallets>div.active{border-color:#6976e9}.user-wallets>div:hover:not(:active){box-shadow:0 3px 5px -2px rgba(0,0,0,.3),0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.15)}",""])}}]);